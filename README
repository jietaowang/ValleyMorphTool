ValleyMorph Tool

Related article: Daxberger, H., Dalumpines, R., Scott, D.M., Riller, U. (in press). The ValleyMorph Tool: An Automated Extraction Tool for Transverse Topographic Symmetry (T-) Factor and Valley Width to Valley Height (Vf) Ratio. Computers & Geosciences.

This tool creates crosslines (perpendicular to) or profile lines of watershed midline. For each predefined interval, the tool measures distances from the midline to the river, and from the river to the watershed boundary. The tool extracts elevation values for points defined by the intersection of the crosslines, watershed boundary, and the extent of valley floor. Aside from the elevation values, the tool also measures the width of the valley floor for each interval. Most of the results are summarized in tables, with feature classes included for validation and other purposes. The tool's outputs, which consist of six file geodatabase feature classes and three tables, are stored in a user-defined file geodatabase. The output filenames can be identified with "rt_" prefix.

This repository consists of two main folders: script and test. The script folder contains the two versions of the tool, which can be used as a standalone (idle subfolder) or can be added in ArcMap as a tool (arctoolbox subfolder). Both versions were tested in ArcGIS 10.1, with the standalone version to be more stable. The test folder contains a sample watershed and corresponding DEM that can be used to explore the ValleyMorph's functionality. Also, the test folder includes an output file geodatabase that contains the tool's outputs using the default settings. Note that some elevation points extracted have no data values due to limited pixels along the watershed boundaries (this can be avoided by setting the option for Adjust for Edge Effects to True). For more information about the tool (including information on further processing of the data generated by the tool), see the related article cited above.

As a guide, please use the toolbox version of the tool because it provides a simple GUI and basic information on the tool's inputs. For detailed information on how to add the toolbox version to ArcMap, please consult ArcGIS help on using ArcToolbox window. Once familiar with the inputs in the toolbox version, one may use the standalone version (tested in Python's IDLE) to process huge datasets. For the standalone version, the user needs to change the following input parameters at the bottom of the Python file (river_transect_standalone.py):

# Set input parameters.
workspace = r"C:\Users\Ron\Documents\GitHub\ValleyMorphTool\test\output.gdb"  # output workspace (file geodatabase)
in_raster = r"C:\Users\Ron\Documents\GitHub\ValleyMorphTool\test\wsheddem"  # watershed DEM (raster layer)
watershedbound = r"C:\Users\Ron\Documents\GitHub\ValleyMorphTool\test\wshedbound.shp"  # watershed boundaries (feature layer)
watershedfid = "FID"  # watershed ID (fieldname)
interval = 50  # longaxis interval in meters (float)
interval_profile = 500  # midline and river profile interval in meters (float)
count_intervalpr = None  # number of midline and river profile interval (integer)
adjust_edge = "False"  # adjustment for edge effects (boolean string)

For detailed information on how to edit and run the standalone version, please consult www.python.org on IDLE documentation.